{{ $caption := or .Attributes.caption "" }}
{{ $class := or .Attributes.class "diagram" }}
{{ $id := or .Attributes.id (printf "diagram-%d" (add 1 .Ordinal)) }}

<figure id="{{ $id }}" class="goat">
  {{ with diagrams.Goat (trim .Inner "\n\r") }}
    <svg 
      class="{{ $class }}" 
      width="{{ .Width }}" 
      height="{{ .Height }}"  
      xmlns="http://www.w3.org/2000/svg" 
      version="1.1"
      class="goat__svg"
    >
      {{ .Inner }}
    </svg>
  {{ end }}
  <figcaption class="goat__caption">
    {{ $caption }}
  </figcaption>
</figure>